cache:
  directories:
  - "$HOME/.cache/pip"
  - "$HOME/.pyenv"

sudo: required
dist: trusty
addons:
  apt:
    packages:
    - wget
    - curl
    - squashfs-tools

before_install:
  - sudo apt-get update

install:
- bash -ex ./.travis_install.sh

script:
- bash -ex ./.travis_run.sh

after_success:
- ls -lh out/*
- wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
- bash -ex ./upload.sh out/*

branches:
  only:
  - master

#notifications:
#  webhooks:
#    urls:
#      - https://webhooks.gitter.im/e/
#    on_success: always  # options: [always|never|change] default: always
#    on_failure: always  # options: [always|never|change] default: always
#    on_start: always     # options: [always|never|change] default: always